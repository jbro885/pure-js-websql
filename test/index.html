<!DOCTYPE html>
<html>
<head>
<script src='https://raw.github.com/kripken/sql.js/master/js/sql.js'></script>
<script src='../js/purejswebsql.js'></script>
<script>
//window.openDatabase = null;

function $(selector) {
	var id = selector.substring(1); // trivial implementation
	return document.getElementById(id);
}

var db = openDatabase('mydb', '1.0', 'my first database', 2 * 1024 * 1024);

function showValues() {
	db.transaction(function (tx) {
		tx.executeSql($('#sqlcode').value, [], function (tx, results) {
			var len = results.rows.length;
			var text = '';
			for (var i = 0; i < len; i++) {
				text += JSON.stringify(results.rows.item(i)) + '<br/>';
			}
			$('#values').innerHTML = text;
		}, function(e) {console.log(e)});
	});
}
</script>
<script src=""></script>
</head>
<body>
<textarea id='sqlcode' cols='80' rows='8'>
DROP TABLE IF EXISTS foo;
CREATE TABLE IF NOT EXISTS foo (id unique, text);
INSERT INTO foo (id, text) VALUES (1, "synergies");
INSERT INTO foo (id, text) VALUES (2, "synergies2");
SELECT * FROM foo;
</textarea>
<br/>
<input type='button' value='Show result' onclick='showValues()' />

<div id='values'/>
</body>
</html>
